#!/bin/sh

function closewindows () {
  for w in $(bspc query -N); do
    wmctrl -i -c "$w"
  done
}

function endsession () {
  bspc quit
}

function reloadsession () {
  bspc wm -r
}

ANS=$(echo "Lock|Clear|Logout|Reload|Reboot|Shutdown" | \
    rofi -sep "|" -dmenu -i -p 'System' "" -width 20 \
    -hide-scrollbar -eh 1 -line-padding 4 -padding 20 -lines 4)
case "$ANS" in
    *Lock) de-lock ;;
    *Clear) closewindows ;;
    *Logout) closewindows; endsession ;;
    *Reload) reloadsession ;;
    *Reboot) closewindows; endsession; systemctl -i reboot ;;
    *Shutdown) closewindows; endsession; systemctl -i poweroff ;;
esac
